# Лабораторная работа №5 «Разработка функций на языке Ассемблера и встраивание их в программы на языке C»

## Введение

Целью данной работы является изучение взаимодействия кода на языке C и на языке Ассемблера.  
Данный аспект является крайне важным, т.к. обычно программы стараются делать максимально переносимыми, при этом затрачивая на разработку минимальное время.  
При разработке ПО хорошей практикой часто является следующий подход (разумеется, данные этапы могут многократно повторяться):

1. Проектирование программы
2. Разработка программы
3. Отладка программы
4. Анализ производительности программы
5. Оптимизация программы

Подобный подход можно коротко описать с помощью следующего высказывания Kента Бека:

> Make it work, make it right, make it fast

При этом, практика показывает, что смысла разрабатывать программы на языке Ассемблера целиком практически нет, гораздо более эффективной стратегией является реализация на языке Ассемблера лишь тех фрагментов программы, на выполнение которых тратится наибольшее время.

Для выполнения данной лабораторной работы необходимо:

1. Разработать программу на языке C, реализующую требуемую функциональность.
2. Провести анализ производительности программы, собранной со следующими настройками оптимизатора (режим отладки должен быть выключен):
    - `-O0`
    - `-O1`
    - `-O2`
    - `-O3`
    - `-Ofast`
3. Реализовать основную функцию обработки изображения на языке Ассемблера.
4. Провести анализ производительности полученной программы.

## Примечания

1. Имена входного и выходного файлов должны передаваться в программу через аргументы командной строки.
2. Программа должна проверять наличие и корректность входных файлов, корректность задания исходных данных, и т.д.
3. Программа на языке C должна содержать функцию, выполняющую основную обработку изображения, которое находится в некотором буфере.
4. Функция, выполняющая основную обработку изображения, не может использовать никакие библиотечные функции.
5. Реализация ассемблерной функции, выполняющей основную обработку изображения, должна находиться в отдельном файле с расширением .s.
6. При работе с файлами (чтение/запись), содержащими графическое изображение, рекомендуется использовать готовые библиотеки на языке C.
7. Анализ производительности должен осуществляться на нескольких примерах, его результаты должны быть представлены в виде таблицы.


## Индивидуальное задание (Вариант №6)

### Задание

Отмасштабировать изображение до заданного размера, воспользовашись алгоритмом Nearest Neighbor. Для этого необходимо определить коэффициенты масштабирования по осям $x$ и $y$, а затем каждому пикселю нового изображения поставить в соответствие пиксель из старого:

$$
x_{ratio} = \frac{width_{old}}{width_{new}}
$$

$$
y_{ratio} = \frac{height_{old}}{height_{new}}
$$

$$
(x, y) \Leftrightarrow (floor(x * x_{ratio}), floor(y * y_{ratio}))
$$

### Формат входных и выходных данных

Изображение в формате JPEG.

